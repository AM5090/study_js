/* eslint-disable semi-spacing */
(()=>{"use strict";(function(e){const t=document.querySelector("#timer-hours"),o=document.querySelector("#timer-minutes"),n=document.querySelector("#timer-seconds");let r=0;function c(){const e=function(){const e=(new Date("22 january 2021").getTime()-(new Date).getTime())/1e3,t=Math.floor(e%60),o=Math.floor(e/60%60);return{timeRemaining:e,hours:Math.floor(e/60/60),minutes:o,seconds:t}}();e.timeRemaining>0?(t.textContent=e.hours>9?e.hours:"0"+e.hours,o.textContent=e.minutes>9?e.minutes:"0"+e.minutes,n.textContent=e.seconds>9?e.seconds:"0"+e.seconds):(t.textContent="00",o.textContent="00",n.textContent="00",clearInterval(r))}c(),r=setInterval(c,1e3)})(),(()=>{const e=document.querySelector("menu");document.addEventListener("click",(t=>{const o=t.target;o.closest("div.menu")?e.classList.toggle("active-menu"):o.matches("menu.active-menu")||o.matches("ul>li")||e.classList.remove("active-menu")}))})(),(()=>{const e=document.querySelector(".popup"),t=document.querySelectorAll(".popup-btn"),o=document.querySelector(".popup-content");let n,r=-400;const c=()=>{screen.width>768?(n=requestAnimationFrame(c),r+=8,o.style.top=r+"px","200px"===o.style.top&&(cancelAnimationFrame(n),r=-400)):(cancelAnimationFrame(n),e.style.display="block")};t.forEach((t=>{t.addEventListener("click",(()=>{n=requestAnimationFrame(c),e.style.display="block"}))})),e.addEventListener("click",(t=>{let o=t.target;o.classList.contains("popup-close")?e.style.display="none":(o=o.closest(".popup-content"),o||(e.style.display="none"))}))})(),(()=>{const e=document.querySelector(".service-header"),t=e.querySelectorAll(".service-header-tab"),o=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{let n=e.target;n=n.closest(".service-header-tab"),n&&t.forEach(((e,r)=>{e===n&&(e=>{for(let n=0;n<o.length;n++)e===n?(t[n].classList.add("active"),o[n].classList.remove("d-none")):(t[n].classList.remove("active"),o[n].classList.add("d-none"))})(r)}))}))})(),(()=>{const e=document.querySelector(".portfolio-dots"),t=document.querySelectorAll(".portfolio-item");for(let o=0;o<t.length;o++){const t=document.createElement("li");t.classList.add("dot"),e.append(t)}e.firstChild.classList.add("dot-active")})(),(()=>{const e=document.querySelectorAll(".portfolio-item"),t=document.querySelectorAll(".dot"),o=document.querySelector(".portfolio-content");let n,r=0;const c=(e,t,o)=>{e[t].classList.remove(o)},a=(e,t,o)=>{e[t].classList.add(o)},s=()=>{c(e,r,"portfolio-item-active"),c(t,r,"dot-active"),r++,r>=e.length&&(r=0),a(e,r,"portfolio-item-active"),a(t,r,"dot-active")},l=(e=3e3)=>{n=setInterval(s,e)};o.addEventListener("click",(o=>{o.preventDefault();const n=o.target;n.matches(".portfolio-btn, .dot")&&(c(e,r,"portfolio-item-active"),c(t,r,"dot-active"),n.matches("#arrow-right")?r++:n.matches("#arrow-left")?r--:n.matches(".dot")&&t.forEach(((e,t)=>{e===n&&(r=t)})),r>=e.length&&(r=0),r<0&&(r=e.length-1),a(e,r,"portfolio-item-active"),a(t,r,"dot-active"))})),o.addEventListener("mouseover",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(n)})),o.addEventListener("mouseout",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&l()})),l(1500)})(),document.querySelectorAll("img.command__photo").forEach((e=>{e.addEventListener("mouseover",(t=>{const o=t.target.src;t.target.src=t.target.dataset.img,e.addEventListener("mouseout",(e=>{e.target.src=o}))}))})),((e=100)=>{const t=document.querySelector(".calc-block"),o=document.querySelector(".calc-type"),n=document.querySelector(".calc-square"),r=document.querySelector(".calc-count"),c=document.querySelector(".calc-day"),a=document.getElementById("total");let s;t.addEventListener("input",(t=>{const l=t.target;(l.matches("select")||l.matches("input"))&&(cancelAnimationFrame(s),l.matches("input")&&(l.value=l.value.replace(/\D/g,"")),"0"===l.value||""===l.value?(a.textContent=0,clearInterval(s)):(()=>{let t=0,l=1,i=1,u=0;const m=o.options[o.selectedIndex].value,d=+n.value;r.value>1&&(l+=(r.value-1)/10),c.value&&c.value<5?i*=2:c.value&&c.value<10&&(i*=1.5),m&&d&&(t=e*m*d*l*i);const p=()=>{s=requestAnimationFrame(p,1),u+=t<1e3?100:t<5e3?700:t<1e4?2e3:5e3,u<t?a.textContent=u:(a.textContent=Math.floor(t),cancelAnimationFrame(s))};s=requestAnimationFrame(p,1)})())}))})(100),(()=>{const e="Что то пошло не так...",t="Загрузка...",o="Спасибо! Мы скоро с вами свяжемся!",n=document.getElementById("form1"),r=document.getElementById("form2"),c=document.getElementById("form3"),a=n.querySelectorAll("input"),s=r.querySelectorAll("input"),l=c.querySelectorAll("input"),i=document.createElement("div");i.style.cssText="font-size: 2rem;",(()=>{const e=/[^0-9+]/,t=/[^А-Яа-яЁё\s]/,o=/[^А-Яа-яЁё\s\d\.\,\!]/;function n(n){n.addEventListener("input",(()=>{"user_phone"===n.name?(n.value=n.value.replace(e,""),n.setAttribute("pattern","[0-9+]{11,}")):"user_name"===n.name?(n.value=n.value.replace(t,""),n.setAttribute("pattern","[А-Яа-яЁё\\s]{2,50}")):"user_message"===n.name?n.value=n.value.replace(o,""):"user_email"===n.name&&(n.value=n.value.replace(/[А-Яа-яЁё]/,""),n.setAttribute("pattern","\\w+@\\w+\\.\\w{2,3}"))}))}a.forEach((e=>n(e))),s.forEach((e=>n(e))),l.forEach((e=>n(e)))})();const u=e=>{e.forEach((e=>{"text"!==e.type&&"email"!==e.type&&"tel"!==e.type||(e.value="")}))};n.addEventListener("submit",(r=>{r.preventDefault(),n.append(i),i.textContent=t,i.style.cssText="color: #fff;";const c=new FormData(n),s={};c.forEach(((e,t)=>{s[t]=e})),m(s).then((e=>{if(200!==e.status)throw new Error("status network not 200");i.textContent=o,u(a)})).catch((t=>{console.error(t),i.textContent=e,u(a)}))})),r.addEventListener("submit",(n=>{n.preventDefault(),r.append(i),i.textContent=t,i.style.cssText="color: #fff;";const c=new FormData(r),a={};c.forEach(((e,t)=>{a[t]=e})),m(a).then((e=>{if(200!==e.status)throw new Error("status network not 200");i.textContent=o,u(s)})).catch((t=>{console.error(t),i.textContent=e,u(s)}))})),c.addEventListener("submit",(n=>{n.preventDefault(),c.append(i),i.textContent=t,i.style.cssText="color: #19b5fe;";const r=new FormData(c),a={};r.forEach(((e,t)=>{a[t]=e})),m(a).then((e=>{if(200!==e.status)throw new Error("status network not 200");i.textContent=o,u(l)})).catch((t=> {console.error(t),i.textContent=e,u(l)}))}));const m = function(e){return fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}})()})();